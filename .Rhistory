frame = 100,
transition = 0,
redraw = FALSE
) %>%
animation_slider(
hide = F
) %>%
animation_button(
x = 1, xanchor = "right", y = 0, yanchor = "bottom"
)
animated_plotly_linechart_marriageRateByAge <- accumulated_ageSpecificMarriageRate %>%
plot_ly(
x=~year,
y=~value,
split=~age_group,
frame=~frame,
type='scatter',
mode='lines',
line=list(simplyfy = F),
hoverinfo='text',
text=~paste('Age Group:', age_group,
'<br> Year:', year,
'<br> Marriages per 1,000 Residents:', value
)
) %>%
layout(
title='Marriage Rate by Age Group',
xaxis = list(
title = "Years",
zeroline = F
),
yaxis = list(
title = "Marriages per 1,000 Residents",
zeroline = F
),
sliders = list(list(currentvalue = list(prefix = "Years: ")))
) %>%
animation_opts(
frame = 100,
transition = 0,
redraw = FALSE
) %>%
animation_slider(
hide = F
) %>%
animation_button(
x = 1, xanchor = "right", y = 0, yanchor = "bottom"
)
animated_plotly_linechart_marriageRateByAge
animated_plotly_linechart_marriageRateByAge <- accumulated_ageSpecificMarriageRate %>%
plot_ly(
x=~year,
y=~value,
split=~age_group,
frame=~frame,
type='scatter',
mode='lines',
line=list(simplyfy = F),
hoverinfo='text',
text=~paste('Age Group:', age_group,
'<br> Year:', year,
'<br> Marriages per 1,000 Residents:', value
)
) %>%
layout(
title='Marriage Rate by Age Group',
xaxis = list(
title = "Years",
zeroline = F
),
yaxis = list(
title = "Marriages per 1,000 Residents",
zeroline = F
)
) %>%
animation_opts(
frame = 100,
transition = 0,
redraw = FALSE
) %>%
animation_slider(
hide = F
) %>%
animation_button(
x = 1, xanchor = "right", y = 0, yanchor = "bottom"
)
animated_plotly_linechart_marriageRateByAge <- accumulated_ageSpecificMarriageRate %>%
plot_ly(
x=~year,
y=~value,
split=~age_group,
frame=~frame,
type='scatter',
mode='lines',
line=list(simplyfy = F),
hoverinfo='text',
text=~paste('Age Group:', age_group,
'<br> Year:', year,
'<br> Marriages per 1,000 Residents:', value
)
) %>%
layout(
title='Marriage Rate by Age Group',
xaxis = list(
title = "Years",
zeroline = F
),
yaxis = list(
title = "Marriages per 1,000 Residents",
zeroline = F
)
) %>%
animation_opts(
frame = 100,
transition = 0,
redraw = FALSE
) %>%
animation_slider(
hide = F
) %>%
animation_button(
x = 1, xanchor = "right", y = 0, yanchor = "bottom"
)
animated_plotly_linechart_marriageRateByAge <- accumulated_ageSpecificMarriageRate %>%
plot_ly(
x=~year,
y=~value,
split=~age_group,
frame=~frame,
type='scatter',
mode='lines',
line=list(simplyfy = F),
hoverinfo='text',
text=~paste('Age Group:', age_group,
'<br> Year:', year,
'<br> Marriages per 1,000 Residents:', value
)
) %>%
layout(
title='Marriage Rate by Age Group',
xaxis = list(
title = "Years",
zeroline = F
),
yaxis = list(
title = "Marriages per 1,000 Residents",
zeroline = F
)
) %>%
animation_opts(
frame = 100,
transition = 0,
redraw = FALSE
) %>%
animation_slider(
currentvalue = list(
prefix = "Year: "
)
) %>%
animation_button(
x = 1, xanchor = "right", y = 0, yanchor = "bottom"
)
animated_plotly_linechart_marriageRateByAge
animated_plotly_linechart_marriageRateByAge <- accumulated_ageSpecificMarriageRate %>%
plot_ly(
x=~year,
y=~value,
split=~age_group,
frame=~frame,
type='scatter',
mode='lines',
line=list(simplyfy = F),
hoverinfo='text',
text=~paste('Age Group:', age_group,
'<br> Year:', year,
'<br> Marriages per 1,000 Residents:', value
)
) %>%
layout(
title='Marriage Rate by Age Group',
xaxis = list(
title = "Years",
zeroline = F
),
yaxis = list(
title = "Marriages per 1,000 Residents",
zeroline = F
)
) %>%
animation_opts(
frame = 100,
transition = 0,
redraw = FALSE
) %>%
animation_slider(
currentvalue = list(
prefix = "Year: "
)
)
animated_plotly_linechart_marriageRateByAge
library(tidyverse)
library(rvest)
url_first_timer_grants <- "http://www.hdb.gov.sg/cs/infoweb/residential/buying-a-flat/new/first-timer-applicants"
webpage_first_timer_grants <- read_html(url_first_timer_grants)
shg_grants <- html_nodes(webpage_first_timer_grants, ".table-responsive no-scrollbar:nth-child(2)")
html_nodes(webpage_first_timer_grants, ".table-responsive no-scrollbar:nth-child(2)")
shg_grants <- html_nodes(webpage_first_timer_grants, ".table-responsive no-scrollbar:nth-child(2)") %>% html_text()
shg_grants
shg_grants <- html_nodes(webpage_first_timer_grants, ".table-responsive no-scrollbar") %>% html_text()
shg_grants
rm(shg_grants)
webpage_first_timer_grants <- read_html(url_first_timer_grants)
webpage_first_timer_grants
shg_grants_html <- html_nodes(webpage_first_timer_grants, '#main-content-detail')
shg_grants_html
shg_grants <- html_text(shg_grants_html)
shg_grants
shg_grants_html <- html_nodes(webpage_first_timer_grants, '#main-content-detail') %>% html_node("tbody")
shg_grants
shg_grants_html
shg_grants_html <- html_nodes(webpage_first_timer_grants, '.table-responsive no-scrollbar:nth-child(2)') %>% html_node("tbody")
shg_grants_html
shg_grants_html <- html_nodes(webpage_first_timer_grants, '.table-responsive no-scrollbar') %>% html_node("tbody")
shg_grants_html
shg_grants_html <- html_nodes(webpage_first_timer_grants, '.table-responsive no-scrollbar')
shg_grants_html
shg_grants_html <- html_nodes(webpage_first_timer_grants, '#main-content-detail') %>% html_nodes(webpage_first_timer_grants, '.table-responsive no-scrollbar')
shg_grants_html <- html_nodes(webpage_first_timer_grants, '#main-content-detail') %>% html_node(webpage_first_timer_grants, '.table-responsive no-scrollbar')
shg_grants_html <- html_nodes(webpage_first_timer_grants, '.table-responsive no-scrollbar')
shg_grants_html
url_grants <- "http://www.hdb.gov.sg/cs/infoweb/residential/buying-a-flat/new/first-timer-and-second-timer-couple-applicants"
webpage_grants <- read_html(url_grants)
webpage_grants <- read_html(url_grants)
rm(webpage_first_timer_grants, shg_grants, shg_grants_html)
rm(url_first_timer_grants)
table_html <- html_nodes(webpage_grants, '.table-responsive no-scrollbar')
table_html <- html_nodes(webpage_grants, '.h2')
table_html <- html_nodes(webpage_grants, 'h2')
table_html <- html_nodes(webpage_grants, 'table')
table <- html_text(table_html)
table
table_html <- html_nodes(webpage_grants, 'table')
rm(table, table_html)
table_html <- html_nodes(webpage_grants, 'table')[1]
table <- html_text(table_html)
table
table_html <- html_nodes(webpage_grants, 'table')[2]
table <- html_text(table_html)
table
rm(table, table_html)
grant_table_html <- html_nodes(webpage_grants, 'table')[2]
grant_table <- html_text(grant_table_html)
grant_table_html <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tr")
grant_table <- html_text(grant_table_html)
grant_table
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tr")
rm(grant_table, grant_table_html)
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tr") %>% html_text()
grants
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("table") %>% html_text()
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("table") %>% html_text()
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("thead") %>% html_text()
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_text()
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_node("tr") %>% html_text()
grants
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_text()
grants
grants <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grants
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
rm(grants)
rm(grant_amount)
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text() %>% [-1]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text() %>% grant_amount[-1]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text() %>% grant_amount[-1,]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text() %>% [-1]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text() %>% [-c(1)]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text() %>% grant_amount[-c(1)]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text() %>% str_replace_all(",","") %>% str_replace_all("$","") %>% as.numeric()
grant_amount <- grant_amount[-c(1)]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text() %>% str_replace_all(",","") %>% str_replace_all("$","") %>% as.numeric()
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)] %>% tr_replace_all(",","") %>% str_replace_all("$","") %>% as.numeric()
grant_amount <- grant_amount[-c(1)] %>% str_replace_all(",","") %>% str_replace_all("$","") %>% as.numeric()
library(stringr)
grant_amount <- grant_amount[-c(1)] %>% str_replace_all(",","") %>% str_replace_all("$","") %>% as.numeric()
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
webpage_grants <- read_html(url_grants)
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% str_replace_all(",","") %>% str_replace_all("$","") %>% html_text() %>% as.numeric()
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child")
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)]
grant_amount <- grant_amount[-c(1)] %<% str_replace_all(grant_amount, "[[:punct:]]", " ")
grant_amount <- grant_amount[-c(1)] %>% str_replace_all(grant_amount, "[[:punct:]]", " ")
grant_amount <- grant_amount[-c(1)] %>% str_replace_all(grant_amount, "[[:punct:]]", "")
grant_amount <- grant_amount[-c(1)]
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)]
str_replace_all(grant_amount, "[[:punct:]]", "")
str_replace_all(grant_amount, "[$,]", "")
grant_amount <- str_replace_all(grant_amount, "[$,]", "") %>% as.numeric()
income_level <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:first-child") %>% html_text()
income_level <- income_level[-c(1)]
income_level
income_level <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:first-child") %>% html_node("p") %>% html_text()
income_level <- income_level[-c(1)]
df_grants <- data.frame(income_level=income_level, grant_amount=grant_amount)
View(df_grants)
income_level <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:first-child") %>% html_node("p") %>% html_text()
income_level <- income_level[-c(1)]
df_grants <- data.frame(income_level=income_level, grant_amount=grant_amount)
income_level
income_level <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:first-child") %>% html_text()
income_level <- income_level[-c(1)]
df_grants <- data.frame(income_level=income_level, grant_amount=grant_amount)
grant_amount <- str_replace_all(income_level, "[\t\n\r\v\f]", "")
income_level <- str_replace_all(income_level, "[\t\n\r\v\f]", "") %>% as.numeric()
webpage_grants <- read_html(url_grants)
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)]
grant_amount <- str_replace_all(grant_amount, "[$,]", "") %>% as.numeric()
income_level <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:first-child") %>% html_text()
income_level <- income_level[-c(1)]
income_level <- str_replace_all(income_level, "[\t\n\r\v\f]", "") %>% as.numeric()
url_grants <- "http://www.hdb.gov.sg/cs/infoweb/residential/buying-a-flat/new/first-timer-and-second-timer-couple-applicants"
webpage_grants <- read_html(url_grants)
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)]
grant_amount <- str_replace_all(grant_amount, "[$,]", "") %>% as.numeric()
income_level <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:first-child") %>% html_text()
income_level <- income_level[-c(1)]
income_level <- str_replace_all(income_level, "[\t\n\r\v\f]", "") %>% as.numeric()
df_grants <- data.frame(income_level=income_level, grant_amount=grant_amount)
url_grants <- "http://www.hdb.gov.sg/cs/infoweb/residential/buying-a-flat/new/first-timer-and-second-timer-couple-applicants"
webpage_grants <- read_html(url_grants)
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)]
grant_amount <- str_replace_all(grant_amount, "[$,]", "") %>% as.numeric()
income_level <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:first-child") %>% html_text()
income_level <- income_level[-c(1)]
income_level <- str_replace_all(income_level, "[\t\n\r\v\f]", "") %>% as.numeric()
income_level <- str_replace_all(income_level, "[\t\n\r\v\f]", "")
url_grants <- "http://www.hdb.gov.sg/cs/infoweb/residential/buying-a-flat/new/first-timer-and-second-timer-couple-applicants"
webpage_grants <- read_html(url_grants)
grant_amount <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:last-child") %>% html_text()
grant_amount <- grant_amount[-c(1)]
grant_amount <- str_replace_all(grant_amount, "[$,]", "") %>% as.numeric()
income_level <- html_nodes(webpage_grants, 'table')[2] %>% html_node("tbody") %>% html_nodes("tr") %>% html_nodes("td:first-child") %>% html_text()
income_level <- income_level[-c(1)]
income_level <- str_replace_all(income_level, "[\t\n\r\v\f]", "")
df_grants <- data.frame(income_level=income_level, grant_amount=grant_amount)
plot_ly(df_grants,
x = ~income_level,
y = ~grant_amount,
type = 'bar'
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color=~income_level,
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount:', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
df_grants$income_level <- factor(df_grants$income_level, levels = df_grants$income_level)
plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color=~income_level,
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount:', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
plotly_barchart_grants <- plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color=~income_level,
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount:', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
)
plotly_barchart_grants
plotly_barchart_grants <- plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color=brewer.pal(15, "Oranges"),
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount:', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
plotly_barchart_grants <- plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color=brewer.pal(15, "Spectral"),
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount:', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
plotly_barchart_grants <- plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color = colorRampPalette(brewer.pal(11,"Spectral"))(15),
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount:', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
plotly_barchart_grants
plotly_barchart_grants <- plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color=~income_level,
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount:', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
plotly_barchart_grants
plotly_barchart_grants <- plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color=~income_level,
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount: $', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
plotly_barchart_grants
plotly_barchart_grants <- plot_ly(df_grants,
x=~income_level,
y=~grant_amount,
type='bar',
color=~income_level,
hoverinfo='text',
text=~paste('Income Level:', income_level,
'<br> Grant Amount:', grant_amount
)
) %>% layout(
title = "Grants by Income Level",
xaxis = list(title = "Income Level"),
yaxis = list(title = "Grant Amount (S$)")
)
plotly_barchart_grants
Sys.setenv("plotly_username"="rebekahlow")
Sys.setenv("plotly_api_key"="RGNdq89F2IGdXKHJb2k9")
api_create(plotly_barchart_grants, filename = "grants-by-income-level")
api_create(plotly_linechart_marriageAndConstructionRate, filename = "marriage-and-construction-rate")
api_create(plotly_linechart_marriageAndDivorceRate, filename = "marriage-and-divorce-rate")
api_create(plotly_linechart_marriageRateByAge, filename = "marriage-by-age-line-chart")
api_create(plotly_piechart_marriageRateByAge, filename = "marriage-by-age-line-chart-pie-chart")
api_create(animated_plotly_linechart_marriageRateByAge, filename = "marriage-by-age-line-chart-animated-chart")
plotly_linechart_marriageRateByAge
plotly_piechart_marriageRateByAge
save.image("C:/Users/Rebekah/Desktop/NM3239/nm3239-data-project-r/.RData")
savehistory("C:/Users/Rebekah/Desktop/NM3239/nm3239-data-project-r/.Rhistory")
